%%%%%%%%
% for Sail listing
\usepackage[T1]{fontenc}
\usepackage[scaled=0.82]{beramono}
\usepackage{amssymb}

% Set default Sail source parameters as a style,
% to avoid conflicts with other sources.
\lstdefinestyle{saildefault}{
% basicstyle=\ttfamily\small,
  basicstyle=\renewcommand{\baselinestretch}{0.9}\ttfamily\small,
  numbers=left,numberstyle=\tiny,numbersep=5pt,
  columns=fullflexible,
  breaklines=true,
  postbreak=\mbox{\textcolor{red}{$\hookrightarrow$}\space},
}

\lstdefinelanguage{sail}
  {style=saildefault,
   morekeywords={val,function,cast,type,forall,overload,operator,
                 enum,union,undefined,exit,and,assert,sizeof,
                 scattered,register,inc,dec,if,then,else,effect,
                 let,as,@,in,end,Type,Int,Order,match,clause,struct},
   keywordstyle={\bf\ttfamily},
   morestring=[b]'',
   stringstyle={\ttfamily\color{red}},
   % For now, we don't print Sail comments.  We should probably add
   % custom comment markers for explicit LaTeX rendition.
   morecomment=[il]{//},
   morecomment=[is]{/*}{*/},
   deletestring=[bd]{'},
   escapechar=\#,
   emphstyle={\it},
   literate=
      {\{|}{{$\{|$}}1
      {|\}}{{$|\}$}}1
  }

\newboolean{SAIL}
\setboolean{SAIL}{true}
%\setboolean{SAIL}{false}

\ifthenelse{\boolean{SAIL}}{
  \input{generated_definitions/latex/commands.tex}
  \usepackage[scaled=0.82]{beramono}
  % Define macros used in the Sail-generated latex.
  \newcommand{\saildocfcl}[2]{#1 #2}
  \newcommand{\saildocfn}[2]{#1 #2}
  \newcommand{\saildoctype}[2]{#1 #2}

  % Define other macros that we use manually in the documentation.
  \newcommand{\sailfname}[1]{\texttt{\it #1}}
} % else not SAIL.
{
  \newcommand{\saildocfcl}[2]{}
  \newcommand{\saildocfn}[2]{}
  \newcommand{\saildoctype}[2]{}
}

\newenvironment{formalspec}
{ \vspace{-0.2in}
  \begin{quotation}
  \noindent
  \small \em
  \rule{\linewidth}{1pt}\\
}
{
  \rule{\linewidth}{1pt}
  \end{quotation}
  \vspace{-0.2in}
}
